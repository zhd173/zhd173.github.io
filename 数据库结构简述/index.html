<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="本文主要对基本的数据库结构（Oracle）做一个简介，希望对各位全面的了解数据库有所帮助。 数据库对象表表是关系型数据存储对象的基本结构 视图基于一个表或多个表或视图的逻辑表，本身不包含数据，通过它可以对表里面的数据进行查询和修改 视图的优点 减少对数据库的访问，因为视图可以对字段有选择性的选取 用户通过简单的查询可以从复杂查询中得到结果 维护数据的独立性，试图可从多个表检索数据 对于相同的数据可">
<meta name="keywords" content="database">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库结构简述">
<meta property="og:url" content="https://haidong.dev/数据库结构简述/index.html">
<meta property="og:site_name" content="海东的博客">
<meta property="og:description" content="本文主要对基本的数据库结构（Oracle）做一个简介，希望对各位全面的了解数据库有所帮助。 数据库对象表表是关系型数据存储对象的基本结构 视图基于一个表或多个表或视图的逻辑表，本身不包含数据，通过它可以对表里面的数据进行查询和修改 视图的优点 减少对数据库的访问，因为视图可以对字段有选择性的选取 用户通过简单的查询可以从复杂查询中得到结果 维护数据的独立性，试图可从多个表检索数据 对于相同的数据可">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2018-09-05T03:37:18.906Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="数据库结构简述">
<meta name="twitter:description" content="本文主要对基本的数据库结构（Oracle）做一个简介，希望对各位全面的了解数据库有所帮助。 数据库对象表表是关系型数据存储对象的基本结构 视图基于一个表或多个表或视图的逻辑表，本身不包含数据，通过它可以对表里面的数据进行查询和修改 视图的优点 减少对数据库的访问，因为视图可以对字段有选择性的选取 用户通过简单的查询可以从复杂查询中得到结果 维护数据的独立性，试图可从多个表检索数据 对于相同的数据可">
    
    
        
          
              <link rel="shortcut icon" href="https://www.gravatar.com/avatar/b2af0ca47828868e8906600eb33f51f3?s=16">
          
        
        
          
            <link rel="icon" type="image/png" href="https://www.gravatar.com/avatar/b2af0ca47828868e8906600eb33f51f3?s=192" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="https://www.gravatar.com/avatar/b2af0ca47828868e8906600eb33f51f3?s=180">
          
        
    
    <!-- title -->
    <title>数据库结构简述</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/archives/">Blog</a></li>
         
          <li><a href="/gtags/">Tags</a></li>
         
          <li><a href="/TODO/">TODO</a></li>
         
          <li><a href="https://github.com/zhd173">GitHub</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/浅谈区块链与数字货币/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://haidong.dev/数据库结构简述/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://haidong.dev/数据库结构简述/&text=数据库结构简述"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://haidong.dev/数据库结构简述/&title=数据库结构简述"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://haidong.dev/数据库结构简述/&is_video=false&description=数据库结构简述"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=数据库结构简述&body=Check out this article: https://haidong.dev/数据库结构简述/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://haidong.dev/数据库结构简述/&title=数据库结构简述"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://haidong.dev/数据库结构简述/&title=数据库结构简述"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://haidong.dev/数据库结构简述/&title=数据库结构简述"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://haidong.dev/数据库结构简述/&title=数据库结构简述"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://haidong.dev/数据库结构简述/&name=数据库结构简述&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#数据库对象"><span class="toc-number">1.</span> <span class="toc-text">数据库对象</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#表"><span class="toc-number">1.1.</span> <span class="toc-text">表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#视图"><span class="toc-number">1.2.</span> <span class="toc-text">视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#视图的优点"><span class="toc-number">1.2.1.</span> <span class="toc-text">视图的优点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#索引"><span class="toc-number">1.3.</span> <span class="toc-text">索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#特点"><span class="toc-number">1.3.1.</span> <span class="toc-text">特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不足"><span class="toc-number">1.3.2.</span> <span class="toc-text">不足</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#类型"><span class="toc-number">1.3.3.</span> <span class="toc-text">类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#B树索引"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">B树索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#哈希索引（HASH）"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">哈希索引（HASH）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#位图索引（bitmap）"><span class="toc-number">1.3.3.3.</span> <span class="toc-text">位图索引（bitmap）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#使用限制"><span class="toc-number">1.3.3.3.1.</span> <span class="toc-text">使用限制</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#索引（组织）表"><span class="toc-number">1.3.3.4.</span> <span class="toc-text">索引（组织）表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#反转键索引"><span class="toc-number">1.3.3.5.</span> <span class="toc-text">反转键索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#基于函数的索引"><span class="toc-number">1.3.3.6.</span> <span class="toc-text">基于函数的索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分区索引"><span class="toc-number">1.3.3.7.</span> <span class="toc-text">分区索引</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#分区方法"><span class="toc-number">1.3.3.7.1.</span> <span class="toc-text">分区方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#类型-1"><span class="toc-number">1.3.3.7.2.</span> <span class="toc-text">类型</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#存储过程和函数"><span class="toc-number">1.4.</span> <span class="toc-text">存储过程和函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#包"><span class="toc-number">1.5.</span> <span class="toc-text">包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#构成"><span class="toc-number">1.5.1.</span> <span class="toc-text">构成</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#触发器"><span class="toc-number">1.6.</span> <span class="toc-text">触发器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据字典"><span class="toc-number">1.7.</span> <span class="toc-text">数据字典</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#完整性约束（规则）"><span class="toc-number">1.8.</span> <span class="toc-text">完整性约束（规则）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#用户与权限"><span class="toc-number">2.</span> <span class="toc-text">用户与权限</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#用户"><span class="toc-number">2.1.</span> <span class="toc-text">用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#权限"><span class="toc-number">2.2.</span> <span class="toc-text">权限</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#系统权限"><span class="toc-number">2.2.1.</span> <span class="toc-text">系统权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对象权限"><span class="toc-number">2.2.2.</span> <span class="toc-text">对象权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#总结"><span class="toc-number">2.2.3.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#角色"><span class="toc-number">2.3.</span> <span class="toc-text">角色</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#预定义角色"><span class="toc-number">2.3.1.</span> <span class="toc-text">预定义角色</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CONNECT-角色"><span class="toc-number">2.3.1.1.</span> <span class="toc-text">CONNECT 角色</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RESOURCE-角色"><span class="toc-number">2.3.1.2.</span> <span class="toc-text">RESOURCE 角色</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DBA-角色"><span class="toc-number">2.3.1.3.</span> <span class="toc-text">DBA 角色</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#自定义角色"><span class="toc-number">2.3.1.4.</span> <span class="toc-text">自定义角色</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除角色"><span class="toc-number">2.3.1.5.</span> <span class="toc-text">删除角色</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#事务和锁"><span class="toc-number">3.</span> <span class="toc-text">事务和锁</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#存在的目的"><span class="toc-number">3.0.1.</span> <span class="toc-text">存在的目的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ACID特性"><span class="toc-number">3.0.2.</span> <span class="toc-text">ACID特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事务的隔离级别"><span class="toc-number">3.0.3.</span> <span class="toc-text">事务的隔离级别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自制事务"><span class="toc-number">3.0.4.</span> <span class="toc-text">自制事务</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#锁"><span class="toc-number">4.</span> <span class="toc-text">锁</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        数据库结构简述
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">海东的博客</span>
      </span>
      
    <div class="postdate">
        <time datetime="2017-05-13T07:52:27.000Z" itemprop="datePublished">2017-05-13</time>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/database/">database</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>本文主要对基本的数据库结构（Oracle）做一个简介，希望对各位全面的了解数据库有所帮助。</p>
<h1 id="数据库对象"><a href="#数据库对象" class="headerlink" title="数据库对象"></a>数据库对象</h1><h2 id="表"><a href="#表" class="headerlink" title="表"></a>表</h2><p>表是关系型数据存储对象的基本结构</p>
<h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2><p>基于一个表或多个表或视图的逻辑表，本身不包含数据，通过它可以对表里面的数据进行查询和修改</p>
<h3 id="视图的优点"><a href="#视图的优点" class="headerlink" title="视图的优点"></a>视图的优点</h3><ul>
<li>减少对数据库的访问，因为视图可以对字段有选择性的选取</li>
<li>用户通过简单的查询可以从复杂查询中得到结果</li>
<li>维护数据的独立性，试图可从多个表检索数据</li>
<li>对于相同的数据可产生不同的视图</li>
</ul>
<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><p>索引是可以提高查询性能的数据结构</p>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul>
<li>通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性</li>
<li>可以大大加快数据的检索速度，这也是创建索引的最主要原因</li>
<li>可以加速表和表之间的链接</li>
<li>可使用分组和排序子句进行数据检索时，同样可以显著减少查询中分组和排序的时间</li>
</ul>
<h3 id="不足"><a href="#不足" class="headerlink" title="不足"></a>不足</h3><ul>
<li>创建索引和维护索引要耗费时间，这种时间随着数据量的增加而增加</li>
<li>索引需要占物理空间，除了数据表占数据空间之外，每一个索引还要占一定的物理空间，如果要建立聚簇索引，那么需要的空间就会更大</li>
<li>当对表中的数据进行增加、删除和修改的时候，索引也要动态的维护，会降低数据的维护速度</li>
</ul>
<h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><h4 id="B树索引"><a href="#B树索引" class="headerlink" title="B树索引"></a>B树索引</h4><ul>
<li>适合大量的增删改（OLTP应用），保证较少的磁盘IO</li>
<li>每个结点都是数据块</li>
<li>叶子块数据是排序的，从左到右递增</li>
<li>不能包含OR操作符的查询</li>
<li>适合高基数的列（唯一值多）</li>
<li>典型的树状结构</li>
<li>大多都是物理上一层、两层或三层不定，逻辑上三层</li>
</ul>
<h4 id="哈希索引（HASH）"><a href="#哈希索引（HASH）" class="headerlink" title="哈希索引（HASH）"></a>哈希索引（HASH）</h4><ul>
<li>适合非范围数据查找</li>
<li>可能是数据库中读取数据的最快方法</li>
<li>ALTER CLUSTER命令不能改变HASH键的数目</li>
</ul>
<h4 id="位图索引（bitmap）"><a href="#位图索引（bitmap）" class="headerlink" title="位图索引（bitmap）"></a>位图索引（bitmap）</h4><ul>
<li>适合决策支持系统和数据仓库</li>
<li>做 UPDATE 代价非常高</li>
<li>很适合 OR 操作符的查询</li>
<li>基数比较少的时候才能建位图索引</li>
</ul>
<h5 id="使用限制"><a href="#使用限制" class="headerlink" title="使用限制"></a>使用限制</h5><ul>
<li>基于规则的优化器不会考虑位图索引</li>
<li>当执行ALTER TABLE语句并修改包含有位图索引的列时，会使位图索引失效</li>
<li>位图索引不包含任何列数据，并且不能用于任何类型的完整性检查</li>
<li>位图索引不能被声明为唯一索引</li>
<li>位图索引的最大长度为30</li>
<li>不要在繁重的OLTP环境中使用位图索引</li>
</ul>
<h4 id="索引（组织）表"><a href="#索引（组织）表" class="headerlink" title="索引（组织）表"></a>索引（组织）表</h4><ul>
<li>索引组织表会把表的存储结构改成B树结构，以表的主键进行排序。</li>
<li>ROWID不会被关联到表的行上</li>
<li>对基于主键值的精确匹配或范围匹配以及UPDATE和DELETE语句，由于行在物理上有序，索引组织表有 很好的表现</li>
<li>键列的值在表和索引中都没有重复，存储所需要的空间少</li>
<li>若不会频繁的根据主键列查询数据，则需要在索引组织表中的其他列上创建二级索引</li>
</ul>
<h4 id="反转键索引"><a href="#反转键索引" class="headerlink" title="反转键索引"></a>反转键索引</h4><ul>
<li>为了解决多个用户对集中在少数快上的索引进行修改，容易引起数据块等待的问题</li>
<li>使有序数列随机化，生成的B-Tree更平衡，读取层级少，从而降低了热数据块</li>
<li>适合磁盘容量有限，同时还要执行大量的有序载入</li>
<li>不能对位图索引</li>
</ul>
<h4 id="基于函数的索引"><a href="#基于函数的索引" class="headerlink" title="基于函数的索引"></a>基于函数的索引</h4><ul>
<li>使执行了函数的查询能使用上索引</li>
<li>需要付出额外的索引的存储空间</li>
<li>必须初始化参数 QUERY_REWRITE_ENABLED</li>
</ul>
<h4 id="分区索引"><a href="#分区索引" class="headerlink" title="分区索引"></a>分区索引</h4><ul>
<li>将一个索引分成多个片段，可以访问更小的片段，也可以把这些片段分别存放在不同的磁盘驱动器上，能够提供更多可以提高性能和可维护性的可能</li>
<li>B-Tree和位图索引都可以被分区，而HASH索引不可以被分区</li>
</ul>
<h5 id="分区方法"><a href="#分区方法" class="headerlink" title="分区方法"></a>分区方法</h5><ul>
<li>表被分区而索引未被分区</li>
<li>表未被分区而索引被分区</li>
<li>表和索引都被分区</li>
</ul>
<h5 id="类型-1"><a href="#类型-1" class="headerlink" title="类型"></a>类型</h5><ul>
<li>本地分区索引<ul>
<li>有前缀索引</li>
<li>无前缀索引</li>
</ul>
</li>
<li>全局分区索引<ul>
<li>有前缀索引</li>
<li>无前缀索引</li>
</ul>
</li>
</ul>
<h2 id="存储过程和函数"><a href="#存储过程和函数" class="headerlink" title="存储过程和函数"></a>存储过程和函数</h2><p>过程和函数都以编译后的形式存放在数据库中，函数有返回值，过程没有返回值，但两者最根本的区别是他们的调用方式。过程作为一个独立的执行语句调用，函数以合法的表达式的方式调用。</p>
<h2 id="包"><a href="#包" class="headerlink" title="包"></a>包</h2><p>包是将过程、函数和数据结构捆绑在一起的容器。</p>
<h3 id="构成"><a href="#构成" class="headerlink" title="构成"></a>构成</h3><ul>
<li>包头</li>
<li>包体</li>
</ul>
<h2 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h2><p>触发器是一种自动执行相应数据库变化的程序。可以设置为在触发器事件之前或之后执行。<br>能够触发触发器事件包括下面几种：</p>
<ul>
<li>DML事件：数据库操纵语言</li>
<li>DDL事件：数据库定义语言</li>
<li>数据库事件</li>
</ul>
<h2 id="数据字典"><a href="#数据字典" class="headerlink" title="数据字典"></a>数据字典</h2><p>数据字典包含数据库的元数据。</p>
<h2 id="完整性约束（规则）"><a href="#完整性约束（规则）" class="headerlink" title="完整性约束（规则）"></a>完整性约束（规则）</h2><p>用于增强数据的完整性</p>
<ul>
<li>CHECK：用于限制列中的值的范围</li>
<li>NOT NULL：强制列不接受NULL值</li>
<li>UNIQUE：唯一标识数据库表中的每条记录，每张表可以有多个</li>
<li>PRIMARY KEY：主键约束，唯一标识，主键列不能包含NULL值，每张表只能有一个主键</li>
<li>FOREIGN KEY：外键约束，指向另一张表中的主键列，预防破坏表之间连接的动作，防止非法数据插入外键列，外键必须是它指向的那个表中的值之一</li>
</ul>
<hr>
<h1 id="用户与权限"><a href="#用户与权限" class="headerlink" title="用户与权限"></a>用户与权限</h1><h2 id="用户"><a href="#用户" class="headerlink" title="用户"></a>用户</h2><ul>
<li>对数据库的访问，需要以适当用户身份通过验证，并具有相关权限来完成一系列动作</li>
<li>SCHEMA：是某个用户所拥有所有对象的集合</li>
</ul>
<h2 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h2><h3 id="系统权限"><a href="#系统权限" class="headerlink" title="系统权限"></a>系统权限</h3><p>允许用户执行特定的数据库动作，如创建表、创建索引、连接实例等<br>常用的系统权限：</p>
<ul>
<li>CREATE SESSION 创建会话</li>
<li>CREATE SEQUENCE 创建序列</li>
<li>CREATE SYNONYM 创建同名对象</li>
<li>CREATE [ANY] TABLE 创建表</li>
<li>DROP TABLE 删除表</li>
<li>CREATE PROCEDURE 创建存储过程</li>
<li>CREATE USER 创建用户</li>
<li>DROP USER 删除用户</li>
<li>CREATE [ANY] VIEW 创建视图</li>
</ul>
<h3 id="对象权限"><a href="#对象权限" class="headerlink" title="对象权限"></a>对象权限</h3><p>允许用户操纵一些特定的对象，如读取视图、更新某些列、执行存储过程等<br>常见的对象权限：</p>
<ul>
<li>ALTER 修改</li>
<li>DELETE 删除</li>
<li>EXECUTE 执行</li>
<li>INDEX 索引</li>
<li>INSERT 插入</li>
<li>SELECT 选择</li>
<li>UPDATE 更新</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul>
<li>使用CREATE USER 语句创建用户，ALTER USER语句修改用户，DROP USER username会删除用户及其所拥有的所有对象的数据</li>
<li>系统权限允许用户在数据库中执行特定的操作，如执行DDL语句。</li>
</ul>
<p>WITH ADMIN OPTION 使得该用户具有将自身获得的权限授予其他用户的功能<br>但回收对象权限时，不会从其他账户级联取消曾被授予的相同权限</p>
<ul>
<li>对象权限允许用户对数据库对象执行特定的操作，如执行DML语句。</li>
</ul>
<p>WITH GRANT OPTION 使得该用户具有将自身获得的对象权限授予其他用户的功能<br>但回收对象权限时，会从其他账户级联取消曾被授予的相同权限</p>
<ul>
<li>系统权限与对象权限授予时的语法差异为对象权限使用了ON object_name 子句</li>
<li>PUBLIC 为所有用户授权</li>
<li>ALL：对象权限中的所有对象权限</li>
</ul>
<h2 id="角色"><a href="#角色" class="headerlink" title="角色"></a>角色</h2><p>角色就是相关权限的命令的集合。使用角色的主要目的就是为了简化权限的管理</p>
<h3 id="预定义角色"><a href="#预定义角色" class="headerlink" title="预定义角色"></a>预定义角色</h3><h4 id="CONNECT-角色"><a href="#CONNECT-角色" class="headerlink" title="CONNECT 角色"></a>CONNECT 角色</h4><p>具有一般应用开发人员需要的大部分权限<br>包括：</p>
<ul>
<li>Alter session</li>
<li>Create cluster</li>
<li>Create database link</li>
<li>Create session</li>
<li>Create table</li>
<li>Create view</li>
<li>Create sequence</li>
<li>……</li>
</ul>
<h4 id="RESOURCE-角色"><a href="#RESOURCE-角色" class="headerlink" title="RESOURCE 角色"></a>RESOURCE 角色</h4><p>具有应用开发人员所需要的其他权限，如<br>包括：</p>
<ul>
<li>Create procedure</li>
<li>Create trigger</li>
<li>……</li>
</ul>
<h4 id="DBA-角色"><a href="#DBA-角色" class="headerlink" title="DBA 角色"></a>DBA 角色</h4><p>DBA角色具有所有的系统权限，及with admin option选项，默认的dba用户为sys和system，他们可以将任何系统权限授予其他用户。但是DBA角色不具备sysdba和sysoper的特权（启动和关闭数据库）</p>
<h4 id="自定义角色"><a href="#自定义角色" class="headerlink" title="自定义角色"></a>自定义角色</h4><ul>
<li>建立角色<ul>
<li>建立不验证的角色</li>
<li>Create role 角色名 not identified</li>
</ul>
</li>
<li>建立数据库验证的角色<ul>
<li>Create role 角色名 identified by 密码</li>
</ul>
</li>
<li>角色授权<ul>
<li>Grant insert,update,delete on object_name to角色名</li>
</ul>
</li>
<li>分配角色给某个用户<ul>
<li>Grant 角色名 to 用户名 with admin option</li>
</ul>
</li>
</ul>
<h4 id="删除角色"><a href="#删除角色" class="headerlink" title="删除角色"></a>删除角色</h4><p>Drop role 角色名</p>
<h1 id="事务和锁"><a href="#事务和锁" class="headerlink" title="事务和锁"></a>事务和锁</h1><p>##事务</p>
<p>事务是数据库管理系统执行过程中的一个逻辑单位，由一个有限的对数据库的读/写操作序列构成</p>
<h3 id="存在的目的"><a href="#存在的目的" class="headerlink" title="存在的目的"></a>存在的目的</h3><ul>
<li>为数据库操作提供了一个从失败中回复到正常状态的方法，同时提供了数据库即使在异常状态下仍然能保持一致性的方法</li>
<li>当多个应用程序在并发访问数据库时，可以在这些应用程序之间提供一个隔离方法，以防止彼此的操作互相干扰</li>
</ul>
<h3 id="ACID特性"><a href="#ACID特性" class="headerlink" title="ACID特性"></a>ACID特性</h3><ul>
<li>原子性（Atomicity）<br>  事务作为一个整体被执行，包含在其中的对数据库的操作要么全部被执行，要么都不执行</li>
<li>一致性（Consistency）<br>  状态前后一致，满足完整性约束</li>
<li>隔离性（Isolation）<br>  多个事务并发执行时，一个事务的执行不应影响其他事务的执行</li>
<li>持久性（Durability）<br>  已被提交的事务对数据库的修改应该永久保存在数据库中</li>
</ul>
<h3 id="事务的隔离级别"><a href="#事务的隔离级别" class="headerlink" title="事务的隔离级别"></a>事务的隔离级别</h3><ul>
<li>Read uncommitted 未提交读，容易造成脏读。事务B读取了事务A尚未提交的数据。</li>
<li>Read committed 已提交读，容易造成不可重复读。事务A事先读取了数据正准备做一些操作，事务B紧接着更新了数据，并提交了事务，而事务A再次使用该数据时，数据已经发生了改变。不可重复读的重点是修改，同样条件读取过的数据，再次读取出来发现值不一样了。</li>
<li>Read  Repeatable 可重复读，可能造成幻读。事务A读取数据并打算做一些操作，此时事务B更新了数据并提交，事务A再读取时数据发生了变化。幻读的重点在于新增或删除，同样的条件，第一次和第二次读出来的记录数不一样。从总的结果看，幻读和不可重复读都表现为两次读取的结果不一致。但如果从控制的角度来看，对于后者只需要锁住满足条件的记录，对于前者，要锁住满足条件及其相近的记录。</li>
<li>Serializable 序列化。最高的事务隔离级别，同时代价也花费最高，性能很低，一般很少使用。在该级别下，事务顺序执行，不仅可以避免脏读、不可重复读，还避免了幻读。</li>
</ul>
<h3 id="自制事务"><a href="#自制事务" class="headerlink" title="自制事务"></a>自制事务</h3><p>事务的“要么全部完成，要么什么都没完成”的本性会使将错误信息记入数据库表中变得很困难，因为当事务失败重新运行时，用来编写日志条目的INSERT语句没有完成。针对这种困境，可以用自治事务来解决。自治事务从当前事务开始，在其自身的语境中执行。它们能独立地被提交或重新运行，而不影响正在运行的事务。正因为这样，它们成了编写错误日志表格的理想形式。在事务中检测到错误时，可以在错误日志表格中插入一行并提交它，然后在不丢失这次插入的情况下回滚主事务。</p>
<h1 id="锁"><a href="#锁" class="headerlink" title="锁"></a>锁</h1><p>数据库是一个多用户使用的共享资源。当多个用户并发地存取数据时，在数据库中就会产生多个事务同时存取同一数据的情况。若对并发操作不加控制就可能会读取和存储不正确的数据，破坏数据库的一致性。加锁是实现数据库并发控制的一个非常重要的技术。当事务在对某个数据对象进行操作前，先向系统发出请求，对其加锁。加锁后事务就对该数据有了一定的控制，在该事务释放锁之前，其他的事务不能对此数据对象进行更新操作。</p>
<p>##基本的锁类型</p>
<ul>
<li>共享锁<ul>
<li>可以被其他事务读取，但不能修改</li>
</ul>
</li>
<li>排它锁<ul>
<li>其他事务不能对它读取和修改</li>
</ul>
</li>
<li>粒度<ul>
<li>行级锁</li>
<li>表级锁</li>
</ul>
</li>
</ul>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/archives/">Blog</a></li>
         
          <li><a href="/gtags/">Tags</a></li>
         
          <li><a href="/TODO/">TODO</a></li>
         
          <li><a href="https://github.com/zhd173">GitHub</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#数据库对象"><span class="toc-number">1.</span> <span class="toc-text">数据库对象</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#表"><span class="toc-number">1.1.</span> <span class="toc-text">表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#视图"><span class="toc-number">1.2.</span> <span class="toc-text">视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#视图的优点"><span class="toc-number">1.2.1.</span> <span class="toc-text">视图的优点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#索引"><span class="toc-number">1.3.</span> <span class="toc-text">索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#特点"><span class="toc-number">1.3.1.</span> <span class="toc-text">特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不足"><span class="toc-number">1.3.2.</span> <span class="toc-text">不足</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#类型"><span class="toc-number">1.3.3.</span> <span class="toc-text">类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#B树索引"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">B树索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#哈希索引（HASH）"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">哈希索引（HASH）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#位图索引（bitmap）"><span class="toc-number">1.3.3.3.</span> <span class="toc-text">位图索引（bitmap）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#使用限制"><span class="toc-number">1.3.3.3.1.</span> <span class="toc-text">使用限制</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#索引（组织）表"><span class="toc-number">1.3.3.4.</span> <span class="toc-text">索引（组织）表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#反转键索引"><span class="toc-number">1.3.3.5.</span> <span class="toc-text">反转键索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#基于函数的索引"><span class="toc-number">1.3.3.6.</span> <span class="toc-text">基于函数的索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分区索引"><span class="toc-number">1.3.3.7.</span> <span class="toc-text">分区索引</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#分区方法"><span class="toc-number">1.3.3.7.1.</span> <span class="toc-text">分区方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#类型-1"><span class="toc-number">1.3.3.7.2.</span> <span class="toc-text">类型</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#存储过程和函数"><span class="toc-number">1.4.</span> <span class="toc-text">存储过程和函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#包"><span class="toc-number">1.5.</span> <span class="toc-text">包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#构成"><span class="toc-number">1.5.1.</span> <span class="toc-text">构成</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#触发器"><span class="toc-number">1.6.</span> <span class="toc-text">触发器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据字典"><span class="toc-number">1.7.</span> <span class="toc-text">数据字典</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#完整性约束（规则）"><span class="toc-number">1.8.</span> <span class="toc-text">完整性约束（规则）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#用户与权限"><span class="toc-number">2.</span> <span class="toc-text">用户与权限</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#用户"><span class="toc-number">2.1.</span> <span class="toc-text">用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#权限"><span class="toc-number">2.2.</span> <span class="toc-text">权限</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#系统权限"><span class="toc-number">2.2.1.</span> <span class="toc-text">系统权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对象权限"><span class="toc-number">2.2.2.</span> <span class="toc-text">对象权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#总结"><span class="toc-number">2.2.3.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#角色"><span class="toc-number">2.3.</span> <span class="toc-text">角色</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#预定义角色"><span class="toc-number">2.3.1.</span> <span class="toc-text">预定义角色</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CONNECT-角色"><span class="toc-number">2.3.1.1.</span> <span class="toc-text">CONNECT 角色</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RESOURCE-角色"><span class="toc-number">2.3.1.2.</span> <span class="toc-text">RESOURCE 角色</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DBA-角色"><span class="toc-number">2.3.1.3.</span> <span class="toc-text">DBA 角色</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#自定义角色"><span class="toc-number">2.3.1.4.</span> <span class="toc-text">自定义角色</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除角色"><span class="toc-number">2.3.1.5.</span> <span class="toc-text">删除角色</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#事务和锁"><span class="toc-number">3.</span> <span class="toc-text">事务和锁</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#存在的目的"><span class="toc-number">3.0.1.</span> <span class="toc-text">存在的目的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ACID特性"><span class="toc-number">3.0.2.</span> <span class="toc-text">ACID特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事务的隔离级别"><span class="toc-number">3.0.3.</span> <span class="toc-text">事务的隔离级别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自制事务"><span class="toc-number">3.0.4.</span> <span class="toc-text">自制事务</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#锁"><span class="toc-number">4.</span> <span class="toc-text">锁</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://haidong.dev/数据库结构简述/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://haidong.dev/数据库结构简述/&text=数据库结构简述"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://haidong.dev/数据库结构简述/&title=数据库结构简述"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://haidong.dev/数据库结构简述/&is_video=false&description=数据库结构简述"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=数据库结构简述&body=Check out this article: https://haidong.dev/数据库结构简述/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://haidong.dev/数据库结构简述/&title=数据库结构简述"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://haidong.dev/数据库结构简述/&title=数据库结构简述"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://haidong.dev/数据库结构简述/&title=数据库结构简述"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://haidong.dev/数据库结构简述/&title=数据库结构简述"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://haidong.dev/数据库结构简述/&name=数据库结构简述&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 zhd173
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/archives/">Blog</a></li>
         
          <li><a href="/gtags/">Tags</a></li>
         
          <li><a href="/TODO/">TODO</a></li>
         
          <li><a href="https://github.com/zhd173">GitHub</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-125225753-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Baidu Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'haidongdev';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


